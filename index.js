//index.js

//npm package: hun-phone-validator

//based on http://agapub.nmhh.hu/aga_web/szolgaltatoBeforeAction?request_locale=hu info
//valid mobile prefixes are: 20 30, 31, 50, 70
//defining regexpression filter for hungarian mobile numbers

// date: 2021-11-08
// const regexpHungarianMobileCheck = {
//   "2000000 to 2019999 | 20 Telenor": /^(\+362020[01][0-9]{4})$/,
//   "2020000 to 2022999 | 20 Telenor": /^(\+3620202[0-2][0-9]{3})$/,
//   "2025000 to 2027999 | 20 Telenor": /^(\+3620202[5-7][0-9]{3})$/,
//   "2030000 to 2099999 | 20 Telenor": /^(\+362020[3-9][0-9]{4})$/,
//   "2100000 to 2999999 | 20 Telenor": /^(\+36202[1-9][0-9]{5})$/,
//   "3100000 to 9999999 | 20 Telenor": /^(\+3620(3[1-9]|[4-9][0-9])[0-9]{5})$/, // this section contains some small holes

//   "0100000 to 0199999 | 30 Telecom": /^(\+363001[0-9]{5})$/,
//   "0700000 to 0759999 | 30 Telecom": /^(\+363007[0-5][0-9]{4})$/,
//   "0800000 to 1039999 | 30 Telecom": /^(\+3630(0[89][0-9]|10[0-3])[0-9]{4})$/,
//   "1060000 to 1069999 | 30 Telecom": /^(\+3630106[0-9]{4})$/,
//   "1080000 to 1119999 | 30 Telecom": /^(\+36301(0[8-9]|1[01])[0-9]{4})$/,
//   "1130000 to 1999999 | 30 Telecom": /^(\+36301([1][3-9]|[2-9][0-9])[0-9]{4})$/,
//   "2000000 to 9999999 | 30 Telecom": /^(\+3630[2-9][0-9]{6})$/, // this section contains some small holes

//   "3100000 to 3189999 | 31 Vodafone": /^(\+363131[0-8][0-9]{4})$/,
//   "3190000 to 3197999 | 31 Vodafone": /^(\+3631319[0-7][0-9]{3})$/,
//   "3199000 to 3292999 | 31 Vodafone": /^(\+36313(199|2[0-8][0-9]|29[0-2])[0-9]{3})$/,
//   "3300000 to 3329999 | 31 Vodafone": /^(\+363133[0-2][0-9]{4})$/,
//   "3666000 to 3666999 | 31 Vodafone": /^(\+36313666[0-9]{3})$/,
//   "7700000 to 7719999 | 31 Vodafone": /^(\+363177[0-1][0-9]{4})$/,
//   "7800000 to 7899999 | 31 Vodafone": /^(\+363178[0-9]{5})$/,
//   "7900000 to 7909999 | 31 Vodafone": /^(\+3631790[0-9]{4})$/,

//   "1000000 to 1399999 | 50 Digi": /^(\+36501[0-3][0-9]{5})$/,

//   "0002000 to 0002999 | 70 Vodafone": /^(\+36700002[0-9]{3})$/,
//   "1188000 to 1188999 | 70 Vodafone": /^(\+36701188[0-9]{3})$/,
//   "1940000 to 1940999 | 70 Vodafone": /^(\+36701940[0-9]{3})$/,
//   "1975000 to 1979999 | 70 Vodafone": /^(\+3670197[5-9][0-9]{3})$/,
//   "1980000 to 1999999 | 70 Vodafone": /^(\+367019[8-9][0-9]{4})$/,
//   "2000000 to 9999999 | 70 Vodafone": /^(\+3670[2-9][0-9]{6})$/, // this section contains some small holes
// };

//updated: 2026-01-13 with regex-generator.js !!! sourse: nmhh xlsx
//permitted hole size: 10000
const regexpHungarianMobileCheck = {
  "2000000 to 2999999 | 20": /^\+36202\d{6}$/,
  "3100000 to 5999999 | 20": /^\+3620[3-5]\d{6}$/,
  "6100000 to 6299999 | 20": /^\+36206[1-2]\d{5}$/,
  "6600000 to 6709999 | 20": /^\+36206[6-7]\d{5}$/,
  "6843000 to 6934999 | 20": /^\+36206[8-9]\d{5}$/,
  "7220000 to 7220999 | 20": /^\+36207220\d{3}$/,
  "7450000 to 7476999 | 20": /^\+362074[5-7]\d{4}$/,
  "7630000 to 7639999 | 20": /^\+3620763\d{4}$/,
  "7700000 to 7799999 | 20": /^\+362077\d{5}$/,
  "8000000 to 8109999 | 20": /^\+36208[0-1]\d{5}$/,
  "8200000 to 8313999 | 20": /^\+36208[2-3]\d{5}$/,
  "8420000 to 8439999 | 20": /^\+362084[2-3]\d{4}$/,
  "8490000 to 8529999 | 20": /^\+36208[4-5]\d{5}$/,
  "8550000 to 8599999 | 20": /^\+362085[5-9]\d{4}$/,
  "8801000 to 8903999 | 20": /^\+36208[8-9]\d{5}$/,
  "9000000 to 9061999 | 20": /^\+362090[0-6]\d{4}$/,
  "9080000 to 9082999 | 20": /^\+3620908[0-2]\d{3}$/,
  "9100000 to 9999999 | 20": /^\+36209[1-9]\d{5}$/,
  "0100000 to 0199999 | 30": /^\+363001\d{5}$/,
  "0700000 to 0779999 | 30": /^\+363007[0-7]\d{4}$/,
  "0800000 to 1039999 | 30": /^\+3630[0-1]\d{6}$/,
  "1060000 to 7639999 | 30": /^\+3630[1-7]\d{6}$/,
  "7659000 to 7939999 | 30": /^\+36307[6-9]\d{5}$/,
  "7960000 to 8000999 | 30": /^\+3630[7-8]\d{6}$/,
  "8020000 to 9169999 | 30": /^\+3630[8-9]\d{6}$/,
  "9190000 to 9999999 | 30": /^\+36309[1-9]\d{5}$/,
  "2000000 to 2022999 | 31": /^\+363120[0-2]\d{4}$/,
  "2100000 to 2109999 | 31": /^\+3631210\d{4}$/,
  "3100000 to 3329999 | 31": /^\+36313[1-3]\d{5}$/,
  "3666000 to 3666999 | 31": /^\+36313666\d{3}$/,
  "7000000 to 7009999 | 31": /^\+3631700\d{4}$/,
  "7700000 to 7719999 | 31": /^\+363177[0-1]\d{4}$/,
  "7800000 to 7909999 | 31": /^\+36317[8-9]\d{5}$/,
  "1000000 to 1399999 | 50": /^\+36501[0-3]\d{5}$/,
  "0002000 to 0002999 | 70": /^\+36700002\d{3}$/,
  "1139000 to 1940999 | 70": /^\+36701[1-9]\d{5}$/,
  "1975000 to 4454999 | 70": /^\+3670[1-4]\d{6}$/,
  "4488000 to 4488999 | 70": /^\+36704488\d{3}$/,
  "4500000 to 4799999 | 70": /^\+36704[5-7]\d{5}$/,
  "4886000 to 4928999 | 70": /^\+36704[8-9]\d{5}$/,
  "4994000 to 7099999 | 70": /^\+3670[4-7]\d{6}$/,
  "7163000 to 7586999 | 70": /^\+36707[1-5]\d{5}$/,
  "7630000 to 7639999 | 70": /^\+3670763\d{4}$/,
  "7700000 to 8046999 | 70": /^\+3670[7-8]\d{6}$/,
  "8090000 to 8109999 | 70": /^\+36708[0-1]\d{5}$/,
  "8269000 to 8269999 | 70": /^\+36708269\d{3}$/,
  "8500000 to 8619999 | 70": /^\+36708[5-6]\d{5}$/,
  "8660000 to 8669999 | 70": /^\+3670866\d{4}$/,
  "8725000 to 8725999 | 70": /^\+36708725\d{3}$/,
  "8810000 to 8869999 | 70": /^\+367088[1-6]\d{4}$/,
  "9000000 to 9099999 | 70": /^\+367090\d{5}$/,
  "9300000 to 9499999 | 70": /^\+36709[3-4]\d{5}$/,
  "9517000 to 9517999 | 70": /^\+36709517\d{3}$/,
  "9530000 to 9539999 | 70": /^\+3670953\d{4}$/,
  "9609000 to 9609999 | 70": /^\+36709609\d{3}$/,
  "9662000 to 9679999 | 70": /^\+367096[6-7]\d{4}$/,
  "9700000 to 9709999 | 70": /^\+3670970\d{4}$/,
  "9721000 to 9723999 | 70": /^\+3670972[1-3]\d{3}$/,
  "9737000 to 9737999 | 70": /^\+36709737\d{3}$/,
  "9770000 to 9809999 | 70": /^\+36709[7-8]\d{5}$/,
  "9837000 to 9850999 | 70": /^\+367098[3-5]\d{4}$/,
  "9870000 to 9999999 | 70": /^\+36709[8-9]\d{5}$/,
};

//cleaning up hungarian phone numbers
function cleanupHungarianPhoneNumber(phonenumber) {
  return phonenumber.replace(/^(06|0036)/g, "+36").replace(/ /g, "");
}

//checking if value is valid hungarian mobile number
function isValidHunPhoneNumber(phonenumber) {
  const cleanedData = cleanupHungarianPhoneNumber(phonenumber);
  let result = false;

  for (let key in regexpHungarianMobileCheck) {
    if (regexpHungarianMobileCheck.hasOwnProperty(key)) {
      result = regexpHungarianMobileCheck[key].test(cleanedData);
      if (result === true) {
        break;
      }
    }
  }
  return result === true ? cleanedData : false;
}

module.exports = isValidHunPhoneNumber;
